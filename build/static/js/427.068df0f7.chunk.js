"use strict";(self.webpackChunkeasy_tourney_fe=self.webpackChunkeasy_tourney_fe||[]).push([[427],{2427:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var s=t(2791),r=t(5705),n=t(8007),i=t(1563);const o=n.Ry().shape({email:i.Do,password:i.Bj});var c=t(697),l=t(1582),m=t(9658),d=t(8550),u=t(3466),h=t(3400),p=t(4294),g=t(3763),x=t(7961),_=t(9569),w=t(3710);const j="Login_login-container__Xu7Q-",Z="Login_login-wrapper__Ca5Mf",b="Login_login-form__UrnjB",y="Login_login-title__CPHLw",L="Login_error-message__zmS0-",P="Login_login-alert-message__NDLdD",v="Login_submit-login-btn__GkgK8";var f=t(6783);var q=t(7689),C=t(9434),N=t(671),S=t(4651),T=t(184);const k=()=>{const[e,a]=(0,s.useState)(!1),t=(0,q.s0)(),[n,i]=(0,s.useState)(!1),k=(0,C.I0)(),[E,A]=(0,s.useState)(!0),B=()=>{a((e=>!e))};return(0,s.useEffect)((()=>{localStorage.getItem("token")?t("/",{replace:!0}):A(!1)}),[t]),E?(0,T.jsx)(S.H_P,{}):(0,T.jsx)(c.Z,{className:j,children:(0,T.jsxs)(c.Z,{className:Z,children:[(0,T.jsx)("h1",{className:y,children:"EASY TOURNEY"}),(0,T.jsx)(r.J9,{initialValues:{email:"",password:""},validationSchema:o,onSubmit:async(e,s)=>{let{resetForm:r}=s;const[n]=await Promise.all([(o=e,(0,f.Z)({url:"/auth/login",method:"POST",headers:{"Content-Type":"application/json"},data:o}))]);var o;n&&n.data&&n.data.token?(k((0,N.x4)(n.data)),t("/",{replace:!0})):i(!0),r(),a(!1)},validateOnBlur:!0,validateOnChange:!1,validateOnMount:!0,children:a=>(0,T.jsxs)(r.l0,{onSubmit:a.handleSubmit,className:b,children:[(0,T.jsxs)(l.Z,{spacing:2,width:"60vw",maxWidth:450,children:[n&&(0,T.jsx)(m.Z,{className:P,severity:"error",children:"Login failed! Incorrect username or password"}),(0,T.jsx)(r.gN,{as:d.Z,color:a.touched.email&&a.errors.email&&"error",error:!(!a.touched.email||!a.errors.email),fullWidth:!0,id:"email-login",label:"Email",name:"email",placeholder:"Email address",type:"email",variant:"outlined",InputProps:{startAdornment:(0,T.jsx)(u.Z,{position:"start",children:(0,T.jsx)(g.Z,{})})}}),(0,T.jsx)("span",{className:L,children:(0,T.jsx)(r.Bc,{name:"email"})})]}),(0,T.jsxs)(l.Z,{spacing:2,width:"60vw",maxWidth:450,children:[(0,T.jsx)(r.gN,{as:d.Z,color:a.touched.password&&a.errors.password&&"error",error:!(!a.touched.password||!a.errors.password),fullWidth:!0,id:"password-login",label:"Password",name:"password",placeholder:"Password",type:e?"text":"password",variant:"outlined",InputProps:{startAdornment:(0,T.jsx)(u.Z,{position:"start",children:(0,T.jsx)(x.Z,{})}),endAdornment:(0,T.jsx)(u.Z,{position:"end",children:(0,T.jsx)(h.Z,{onClick:B,children:e?(0,T.jsx)(_.Z,{}):(0,T.jsx)(w.Z,{})})})}}),(0,T.jsx)("span",{className:L,children:(0,T.jsx)(r.Bc,{name:"password"})})]}),(0,T.jsx)(p.Z,{className:v,size:"large",type:"submit",variant:"contained",children:"Login"})]})})]})})}},1563:(e,a,t)=>{t.d(a,{lk:()=>m,Do:()=>c,Bj:()=>l,uY:()=>u,TN:()=>d});var s=t(8007);const r=/^[\p{L}0-9]+(?:\s[\p{L}0-9]+)*$/u,n=/^[\p{L}]+(?:\s[\p{L}]+)*$/u,i=/^\s/u,o=/\s$/u,c=s.Z_().required("Email is required.").max(50,"Email cannot be more than 50 characters").matches(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address."),l=s.Z_().trim().required("Password is required.").min(6,"Password must be at least 6 characters"),m=s.Z_().required("Please enter category name").test("no-leading-whitespace","Category name must not contain leading whitespace",(function(e){return!e||!i.test(e)})).test("no-trailing-whitespace","Category name must not contain trailing whitespace",(function(e){return!e||!o.test(e)})).min(2,"Category name must be at least 2 characters").max(30,"Category name must be less than 30 characters").matches(r,"Category name must not contain special characters"),d=(s.Z_().required("First name is required").max(30,"First name cannot be more than 30 characters").matches(n,"First name must not contain special characters"),s.Z_().required("Last name is required").max(30,"Last name cannot be more than 30 characters").matches(n,"Last name must not contain special characters"),s.Z_().required("Phone number is required").matches(/^\d*$/,"Phone number must not contain special characters").matches(/^0\d*$/,"Phone number must start with 0").min(10,"Phone number cannot be less than 10 digits").max(11,"Phone number cannot be more than 11 digits"),s.Z_().required("Please enter Title").test("no-leading-whitespace","Title must not contain leading whitespace",(function(e){return!e||!i.test(e)})).test("no-trailing-whitespace","Title must not contain trailing whitespace",(function(e){return!e||!o.test(e)})).min(2,"Title must be at least 2 characters").max(30,"Title must be less than 30 characters").matches(r,"Title must not contain special characters")),u=s.Z_().required("Category is required.")}}]);
//# sourceMappingURL=427.068df0f7.chunk.js.map