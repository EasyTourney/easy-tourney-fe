"use strict";(self.webpackChunkeasy_tourney_fe=self.webpackChunkeasy_tourney_fe||[]).push([[427],{4519:(e,a,s)=>{s.d(a,{Z:()=>r});const t=s(5294).Z.create({baseURL:"http://easy-tourney.mgm-edv.de/api",headers:{"Content-Type":"application/json"}});t.interceptors.request.use((function(e){const a=window.localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer "+a),e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){return null===e||void 0===e?void 0:e.data}),(function(e){var a;return null===(a=e.response)||void 0===a?void 0:a.data}));const r=t},2427:(e,a,s)=>{s.r(a),s.d(a,{default:()=>E});var t=s(2791),r=s(5705),n=s(8007),i=s(1563);const o=n.Ry().shape({email:i.Do,password:i.Bj});var c=s(697),l=s(1582),d=s(9658),m=s(6459),u=s(3466),h=s(3400),p=s(4294),g=s(3763),x=s(7961),_=s(9569),w=s(3710);const j="Login_login-container__JYrRI",Z="Login_login-wrapper__26I76",b="Login_login-form__ZTp6w",v="Login_login-title__UVx7E",y="Login_error-message__f4XYc",f="Login_login-alert-message__qz92v",L="Login_submit-login-btn__LpaPe";var P=s(4519);var q=s(7689),C=s(9434),N=s(671),S=s(4651),k=s(184);const E=()=>{const[e,a]=(0,t.useState)(!1),s=(0,q.s0)(),[n,i]=(0,t.useState)(!1),E=(0,C.I0)(),[I,A]=(0,t.useState)(!0),B=()=>{a((e=>!e))};return(0,t.useEffect)((()=>{localStorage.getItem("token")?s("/",{replace:!0}):A(!1)}),[s]),I?(0,k.jsx)(S.H_P,{}):(0,k.jsx)(c.Z,{className:j,children:(0,k.jsxs)(c.Z,{className:Z,children:[(0,k.jsx)("h1",{className:v,children:"EASY TOURNEY"}),(0,k.jsx)(r.J9,{initialValues:{email:"",password:""},validationSchema:o,onSubmit:async(e,t)=>{let{resetForm:r}=t;const[n]=await Promise.all([(o=e,(0,P.Z)({url:"/auth/login",method:"POST",headers:{"Content-Type":"application/json"},data:o}))]);var o;n&&n.data&&n.data.token?(E((0,N.x4)(n.data)),s("/",{replace:!0})):i(!0),r(),a(!1)},validateOnBlur:!0,validateOnChange:!1,validateOnMount:!0,children:a=>(0,k.jsxs)(r.l0,{onSubmit:a.handleSubmit,className:b,children:[(0,k.jsxs)(l.Z,{spacing:2,width:"60vw",maxWidth:450,children:[n&&(0,k.jsx)(d.Z,{className:f,severity:"error",children:"Login failed! Incorrect username or password"}),(0,k.jsx)(r.gN,{as:m.Z,color:a.touched.email&&a.errors.email&&"error",error:!(!a.touched.email||!a.errors.email),fullWidth:!0,id:"email-login",label:"Email",name:"email",placeholder:"Email address",type:"email",variant:"outlined",InputProps:{startAdornment:(0,k.jsx)(u.Z,{position:"start",children:(0,k.jsx)(g.Z,{})})}}),(0,k.jsx)("span",{className:y,children:(0,k.jsx)(r.Bc,{name:"email"})})]}),(0,k.jsxs)(l.Z,{spacing:2,width:"60vw",maxWidth:450,children:[(0,k.jsx)(r.gN,{as:m.Z,color:a.touched.password&&a.errors.password&&"error",error:!(!a.touched.password||!a.errors.password),fullWidth:!0,id:"password-login",label:"Password",name:"password",placeholder:"Password",type:e?"text":"password",variant:"outlined",InputProps:{startAdornment:(0,k.jsx)(u.Z,{position:"start",children:(0,k.jsx)(x.Z,{})}),endAdornment:(0,k.jsx)(u.Z,{position:"end",children:(0,k.jsx)(h.Z,{onClick:B,children:e?(0,k.jsx)(_.Z,{}):(0,k.jsx)(w.Z,{})})})}}),(0,k.jsx)("span",{className:y,children:(0,k.jsx)(r.Bc,{name:"password"})})]}),(0,k.jsx)(p.Z,{className:L,size:"large",type:"submit",variant:"contained",children:"Login"})]})})]})})}},1563:(e,a,s)=>{s.d(a,{lk:()=>l,Do:()=>o,Bj:()=>c});var t=s(8007);const r=/^[\p{L}]+(?:\s[\p{L}]+)*$/u,n=/^\s/u,i=/\s$/u,o=t.Z_().required("Email is required.").max(50,"Email cannot be more than 50 characters").matches(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,"Please enter a valid email address."),c=t.Z_().trim().required("Password is required.").min(6,"Password must be at least 6 characters"),l=t.Z_().required("Please enter category name").test("no-leading-whitespace","Category name must not contain leading whitespace",(function(e){return!e||!n.test(e)})).test("no-trailing-whitespace","Category name must not contain trailing whitespace",(function(e){return!e||!i.test(e)})).min(2,"Category name must be at least 2 characters").max(30,"Category name must be less than 30 characters").matches(/^[\p{L}0-9]+(?:\s[\p{L}0-9]+)*$/u,"Category name must not contain special characters");t.Z_().required("First name is required").max(30,"First name cannot be more than 30 characters").matches(r,"First name must not contain special characters"),t.Z_().required("Last name is required").max(30,"Last name cannot be more than 30 characters").matches(r,"Last name must not contain special characters"),t.Z_().required("Phone number is required").matches(/^\d*$/,"Phone number must not contain special characters").matches(/^0\d*$/,"Phone number must start with 0").min(10,"Phone number cannot be less than 10 digits").max(11,"Phone number cannot be more than 11 digits")}}]);
//# sourceMappingURL=427.5032aaf0.chunk.js.map